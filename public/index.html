<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Curriculum Information Management System: CIMS</title>

<!--CSS-->
<link rel="stylesheet" href="/jquery-ui/themes/base/jquery-ui.css">

<!--Javascript-->
<!--<script src="/jquery/jquery.min.js"></script>-->
<!--<script src="/jquery-ui/jquery-ui.min.js"></script>-->
<script src="/js-cookies/js.cookie.min.js"></script>

<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

<!--https://bbbootstrap.com/snippets/multi-step-form-wizard-30467045# -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
<link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet"/>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" href="styles/style.min.css">
</head>
<body>
    
    <h1>Curriculum Information Management System: CIMS</h1>

    <nav class="navbar navbar-dark bg-dark" id="nav-bar">
        <a class="navbar-brand" href="#">CIMS API-Test</a>
        <ul class="navbar-nav">
          <li class="nav-item">
           <a class="nav-link" href="/logout" >Logout</a>
          </li>
        </ul>
    </nav>
  
  <!--Popup -->
  <!-- Modal -->
  <div class="modal fade" id="pnlAddSubject" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="pnlAddSubjectLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="pnlAddSubjectLabel" style=" font-family: 'Kanit', sans-serif; font-size: 16px;">เพิ่มรายวิชา</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                
                <div class="form-card">
                    <h2 class="fs-title">รายละเอียด</h2>
                    <div class="row">
                        <div class="col-3" style=" text-align: right;">
                            <label for="txtSubjectCode" style=" font-family: 'Kanit', sans-serif; font-size: 14px;">รหัสวิชา </label>
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="txtSubjectCode">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3" style=" text-align: right;">
                            <label for="txtSubjectAdd" style=" font-family: 'Kanit', sans-serif; font-size: 14px;">ชื่อวิชาภาษาไทย </label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control" id="txtSubjectAdd">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3" style=" text-align: right;">
                            <label for="txtSubjectAddEn" style=" font-family: 'Kanit', sans-serif; font-size: 14px;">ชื่อวิชาภาษาอังกฤษ </label>
                        </div>
                        <div class="col-9">
                            <input type="text" class="form-control" id="txtSubjectAddEn">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3" style=" text-align: right;">
                            <label for="txtSubjectUnit" style=" font-family: 'Kanit', sans-serif; font-size: 14px;">จำนวนหน่วยกิต </label>
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="txtSubjectUnit">
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">ยกเลิก</button>
                <button type="button" class="btn btn-primary">บันทึกข้อมูล</button>
            </div>
        </div>
    </div>
</div>
<!--End Popup -->

    <!-- MultiStep Form -->
    <div class="container-fluid" id="grad1">
        <div class="row justify-content-center mt-0">
            <div class="col-11 col-sm-9 col-md-7 col-lg-6 text-center p-0 mt-3 mb-2">
                <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2><strong>สร้างหลักสูตรใหม่ในระบบ</strong></h2>
                    <p>โปรดระบุและกรอกข้อมูลให้สอดคล้องตามแบบฟอร์ม จากนั้นกดปุ่มถัดไป หรือ ย้อนกลับ เมื่อต้องการแก้ไขข้อมูล</p>
                    <div class="row">
                        <div class="col-md-12 mx-0">
                            <form id="msform">


                                <!-- progressbar -->
                                <ul id="progressbar">
                                    <li class="active" id="account"><strong>ข้อมูลแฟ้ม 1-2</strong></li>
                                    <li id="personal"><strong>ข้อมูลแฟ้ม 3-4</strong></li>
                                    <li id="payment"><strong>ข้อมูลแฟ้ม 5-9</strong></li>
                                    <li id="confirm"><strong>Finish</strong></li>
                                </ul>
                                <!-- fieldsets -->
                                <!-- fieldsets -->
                                <fieldset>
                                    <div class="form-card">
                                        <h2 class="fs-title">ข้อมูลทั่วไป</h2>
                                        
                                        <div class="row">
                                            <div class="col-3">
                                                <label for="cboUniversityGroup">กลุ่มสถาบัน</label>
                                            </div>
                                            <div class="col-12">
                                                <select class="form-control" id="cboUniversityGroup" name="cboUniversityGroup">
                                                    <option selected>---โปรดระบุ---</option>
                                                    <option>List</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">
                                                <label for="cboUniversity">มหาวิทยาลัย</label>
                                            </div>
                                            <div class="col-12">
                                                <select class="form-control" id="cboUniversity" name="cboUniversity">
                                                    <option selected>---โปรดระบุ---</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">
                                                <label for="cboFaculty">คณะ</label>
                                            </div>
                                            <div class="col-12">
                                                <select class="form-control" id="cboFaculty" name="cboFaculty">
                                                    <option selected>---โปรดระบุ---</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtDepartment">ภาควิชาฯ </label><span style="color:red;">&nbsp;(free) *</span>
                                            </div>
                                            <div class="col-9">
                                                <input type="text" class="form-control" id="txtDepartment">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">
                                                <label for="cboCurriculum">หลักสูตร</label>
                                            </div>
                                            <div class="col-12">
                                                <select class="form-control" id="cboCurriculum" name="cboCurriculum">
                                                    <option selected>---โปรดระบุ---</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtCurriculumNameTh">ชื่อหลักสูตรภาษาไทย </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                            </div>
                                            <div class="col-9">
                                                <input type="text" class="form-control" id="txtCurriculumNameTh">
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtAbbrCurriculumNameTh">อักษรย่อ ภาษาไทย </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                            </div>
                                            <div class="col-4">
                                                <input type="text" class="form-control" id="txtAbbrCurriculumNameTh">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtCurriculumNameEn">ชื่อหลักสูตรภาษาอังกฤษ </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                            </div>
                                            <div class="col-9">
                                                <input type="text" class="form-control" id="txtCurriculumNameEn">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtAbbrCurriculumNameEn">อักษรย่อ อังกฤษ </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                            </div>
                                            <div class="col-4">
                                                <input type="text" class="form-control" id="txtAbbrCurriculumNameEn">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtBachelorBranch">ชื่อสาขา </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                            </div>
                                            <div class="col-9">
                                                <input type="text" class="form-control" id="txtBachelorBranch">
                                            </div>
                                        </div>
                                        <hr/>
                                        <h2 class="fs-title">ข้อมูลแฟ้ม 2</h2>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtPhilosophy">ปรัชญา </label><span style="color:red;">&nbsp;(free) *</span>
                                            </div>
                                            <div class="col-9">
                                                <textarea class="form-control" id="txtPhilosophy" rows="4"></textarea>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtObjective">วัตถุประสงค์ </label><span style="color:red;">&nbsp;(free) *</span>
                                            </div>
                                            <div class="col-9">
                                                <textarea class="form-control" id="txtObjective" rows="4"></textarea>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3" style=" text-align: right;">
                                                <label for="txtOutcome">ผลลัพธ์การเรียนรู้ </label><span style="color:red;">&nbsp;(free) *</span>
                                            </div>
                                            <div class="col-9">
                                                <textarea class="form-control" id="txtOutcome" rows="4"></textarea>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <input type="button" name="next" class="next action-button" value="ถัดไป"/>
                                </fieldset>
                                
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title">ข้อมูลแฟ้ม 3</h2>
                                        
                                    <div class="row">
                                        <div class="col-6" style=" text-align: right;">
                                            <label for="txtTotalCredit">จำนวนหน่วยกิจรวมตลอดหลักสูตร </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                        </div>
                                        <div class="col-3">
                                            <input type="text" class="form-control" id="txtTotalCredit">
                                        </div>
                                        <div class="col-3">
                                            หน่วยกิจ
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6" style=" text-align: right;">
                                            <label for="txtYear">ระยะเวลาการศึกษา </label><span style="color:blue;">&nbsp;&nbsp;(Auto)*</span>
                                        </div>
                                        <div class="col-3">
                                            <input type="text" class="form-control" id="txtYear">
                                        </div>
                                        <div class="col-3">
                                            ปี
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6" style=" text-align: right;">
                                            <label for="txtGenaralCredit">หมวดวิชาศึกษาทั่วไป </label><span style="color:red;">&nbsp;(free) *</span>
                                        </div>
                                        <div class="col-3">
                                            <input type="text" class="form-control" id="txtGenaralCredit">
                                        </div>
                                        <div class="col-3">
                                            หน่วยกิต
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6" style=" text-align: right;">
                                            <label for="txtSpecificationCredit">หมวดวิชาเฉพาะ </label><span style="color:red;">&nbsp;(free) *</span>
                                        </div>
                                        <div class="col-3">
                                            <input type="text" class="form-control" id="txtSpecificationCredit">
                                        </div>
                                        <div class="col-3">
                                            หน่วยกิต
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6" style=" text-align: right;">
                                            <label for="txtEletiveCredit">หมวดวิชาเลือกเสรี </label><span style="color:red;">&nbsp;(free) *</span>
                                        </div>
                                        <div class="col-3">
                                            <input type="text" class="form-control" id="txtEletiveCredit">
                                        </div>
                                        <div class="col-3">
                                            หน่วยกิต
                                        </div>
                                    </div>
                                    <hr/>
                                    <h2 class="fs-title">รายวิชา</h2>
                                    
                                    <button class="btn btn-outline-secondary" type="button" id="btnAddSubject" data-toggle="modal" data-target="#pnlAddSubject">เพิ่มรายวิชา</button>
                                    <div class="tab-container">
                                        
                                        <table class="table table-striped" id="tbSubject">
                                            <thead>
                                                <tr>
                                                    <th scope="col">#</th>
                                                    <th scope="col">รหัสวิชา</th>
                                                    <th scope="col">ชื่อวิชา</th>
                                                    <th scope="col">หน่วยกิต</th>
                                                    <th scope="col">แก้ไข</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbody">
                                                <tr>
                                                    <th scope="row">1</th>
                                                    <td>xxxx</td>
                                                    <td>วิศวกรรมสิ่งแวดล้อม </td>
                                                    <td><input type="text" name="creditSub1" id="creditSub1" placeholder="หน่วยกิต"/></td>
                                                    <td><button class="btn btn-outline-primary" type="button" >แก้ไข</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <hr/>
                                    <h2 class="fs-title">ข้อมูลแฟ้ม 4</h2>
                                    <div class="row">
                                        <div class="col-5" style=" text-align: right;">
                                            <label for="txtMethodology">การจัดกระบวนการการเรียนรู้ </label><span style="color:red;">&nbsp;(free) *</span>
                                        </div>
                                        <div class="col-7">
                                            <textarea class="form-control" id="txtMethodology" rows="4"></textarea>
                                        </div>
                                    </div>

                                </div>
                                <input type="button" name="previous" class="previous action-button-previous" value="ย้อนกลับ"/>
                                <input type="button" name="next" class="next action-button" value="ถัดไป"/>
                            </fieldset>
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title">ข้อมูลแฟ้ม 5</h2>
                                    <div class="tab-container">
                                        <table class="table table-striped" id="tbSubject">
                                            <thead>
                                                <tr>
                                                    <th scope="col">#</th>
                                                    <th scope="col">รหัสวิชา</th>
                                                    <th scope="col">ชื่อวิชา</th>
                                                    <th scope="col">หน่วยกิต</th>
                                                    <th scope="col">แก้ไข</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbodyLecturer">
                                                <tr>
                                                    <th scope="row">1</th>
                                                    <td>xxxx</td>
                                                    <td>วิศวกรรมสิ่งแวดล้อม </td>
                                                    <td><input type="text" name="creditSub1" id="creditSub1" placeholder="หน่วยกิต"/></td>
                                                    <td><button class="btn btn-outline-primary" type="button" >แก้ไข</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                                <input type="button" name="previous" class="previous action-button-previous" value="ย้อนกลับ"/>
                                <input type="button" name="make_payment" class="next action-button" value="ยืนยัน"/>
                            </fieldset>
                            <fieldset>
                                <div class="form-card">
                                    <h2 class="fs-title text-center">Success !</h2>
                                    <br><br>
                                    <div class="row justify-content-center">
                                        <div class="col-3">
                                            <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image">
                                        </div>
                                    </div>
                                    <br><br>
                                    <div class="row justify-content-center">
                                        <div class="col-7 text-center">
                                            <h5>You Have Successfully Signed Up</h5>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            </form>




                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>





</body>
<script type="text/javascript">
    $(document).ready(function () {

       var tokenValue = Cookies.get('token') ;

       console.log("Onload");
       console.log("token "+tokenValue);

       //removeCookie;
       //Cookies.remove('token')
       //set
       //Cookies.set('name', 'value', { expires: 7 })

       /*
       Swal.fire({
            title: 'Success!',
            text: 'test',
            icon: 'success',
            confirmButtonText: 'Okay'
        }).then((result) => {
            if (result.isConfirmed) {
                console.log("callback");
            } 
        });
        */

       $.ajax({
            method: "GET",
            url: "https://tools.ecpe.nu.ac.th/cims/api/university-groups",
            dataType : 'json',
            headers: { 
              'Content-Type': 'application/json',
              "Accepts": "application/json",
              "Authorization": "Bearer "+tokenValue,
            },
            success: function(data){
              console.log(data);
              console.log(data.data);
              var list =data.data.university_groups;

              console.log(list.length);
              var options = '';
              for (var i = 0; i < list.length; i++) {
                options += '<option value="' + list[i].univ_group_id + '">' + list[i].univ_group_name + '</option>';
              }
             $("select#cboUniversityGroup").html(options);
              

              //alert("Done");
            }
        });
        //---------On Change-------


        
        $("select#cboUniversityGroup").change(function(){
            $('select#cboUniversity option:not(:first)').remove();
            $('select#cboFaculty option:not(:first)').remove();
            $('select#cboCurriculum option:not(:first)').remove();
            
            //clear datatable
            $("#tbSubject").find("tr:gt(0)").remove();
            
            //clear data
            clearCurriculumData();

            if($(this).val()!=""){
               
                $.ajax({
                    beforeSend: function(request) {
                        request.setRequestHeader('Authorization', 'Bearer '+tokenValue);
                        request.setRequestHeader('Content-Type', 'application/json');
                    },
                    dataType: "json",
                    url: "https://tools.ecpe.nu.ac.th/cims/api/universities-by-group/"+$(this).val(),
                    success: function(data) {
                        //Your code
                        console.log(data);
                        console.log(data.data);
                        var list =data.data.universities;
          
                        console.log(list.length);

                        var options = '';
                        for (var i = 0; i < list.length; i++) {
                          options += '<option value="' + list[i].univ_id + '">' + list[i].univ_name_th + '</option>';
                        }
                        $('#cboUniversity').append(options);
                    }
                });
   
            }// end if

        });

        $("select#cboUniversity").change(function(){
            $('select#cboFaculty option:not(:first)').remove();

            if($(this).val()!=""){
               
                $.ajax({
                    beforeSend: function(request) {
                        request.setRequestHeader('Authorization', 'Bearer '+tokenValue);
                        request.setRequestHeader('Content-Type', 'application/json');
                    },
                    dataType: "json",
                    url: "https://tools.ecpe.nu.ac.th/cims/api/faculties-in-uni/"+$(this).val(),
                    success: function(data) {
                        //Your code
                        console.log(data);
                        console.log(data.data);
                        var list =data.data.faculties;
          
                        console.log(list.length);

                        var options = '';
                        for (var i = 0; i < list.length; i++) {
                          options += '<option value="' + list[i].fac_id + '">' + list[i].fac_name_th + '</option>';
                        }
                        $('#cboFaculty').append(options);
                    }
                });
   
            }// end if

        });


        $("select#cboFaculty").change(function(){
            $('select#cboCurriculum option:not(:first)').remove();

            if($(this).val()!=""){
               
                $.ajax({
                    beforeSend: function(request) {
                        request.setRequestHeader('Authorization', 'Bearer '+tokenValue);
                        request.setRequestHeader('Content-Type', 'application/json');
                    },
                    dataType: "json",
                    url: "https://tools.ecpe.nu.ac.th/cims/api/curriculum/"+$("select#cboUniversity").val()+"/"+$(this).val(),
                    success: function(data) {
                        //Your code
                        console.log(data);
                        console.log(data.data);
                        var list =data.data.curriculum;
          
                        console.log(list.length);

                        var options = '';
                        for (var i = 0; i < list.length; i++) {
                          options += '<option value="' + list[i].curr_id + '">' + list[i].curr_name + '</option>';
                        }
                        $('#cboCurriculum').append(options);
                    }
                });
            }// end if
        });

        $("select#cboCurriculum").change(function(){
            //clear data
            clearCurriculumData();

            if($(this).val()!=""){
                
                applyCurriculumData($(this).val());
                applySubjectData($(this).val());
                
            }// end if
        });

        //-----custom function------
        
        function applyCurriculumData(curr_id){

            $.ajax({
                beforeSend: function(request) {
                    request.setRequestHeader('Authorization', 'Bearer '+tokenValue);
                    request.setRequestHeader('Content-Type', 'application/json');
                },
                dataType: "json",
                url: "https://tools.ecpe.nu.ac.th/cims/api/curriculum/"+curr_id,
                success: function(data) {
                    //Your code
                    console.log(data);
                    console.log(data.data);
                    var result =data.data.curriculum;
      
                    console.log(result.length);
                    
                    $('#txtCurriculumNameTh').val(result[0].bachelor_th);
                    $('#txtAbbrCurriculumNameTh').val(result[0].s_bachelor_th);
                    $('#txtCurriculumNameEn').val(result[0].bachelor_en);
                    $('#txtAbbrCurriculumNameEn').val(result[0].s_bachelor_en);
                    $('#txtBachelorBranch').val(result[0].bachelorbranch);
                    $('#txtTotalCredit').val(result[0].credit_units_1);

                }
            });
        }

        function clearCurriculumData(){
            $('#txtCurriculumNameTh').val('');
            $('#txtAbbrCurriculumNameTh').val('');
            $('#txtCurriculumNameEn').val('');
            $('#txtAbbrCurriculumNameEn').val('');
            $('#txtBachelorBranch').val('');
            $('#txtTotalCredit').val('');
        }

        
        function applySubjectData(curr_id){

            $.ajax({
                beforeSend: function(request) {
                    request.setRequestHeader('Authorization', 'Bearer '+tokenValue);
                    request.setRequestHeader('Content-Type', 'application/json');
                },
                dataType: "json",
                url: "https://tools.ecpe.nu.ac.th/cims/api/subject/"+curr_id,
                success: function(result) {
                    //Your code
                    console.log(result.length);
                    console.log('Update subject');
                    updateSubject(result);

                }
            });
        }


         //----------Utility----------------------
        function updateSubject(items) {
            console.log("updateSubject"+items.length);
            
            //clear datatable
            $("#tbSubject").find("tr:gt(0)").remove();
            

            for (var i = 0; i < items.length; i++) {
                var indexRef=i+1;
                var col1=indexRef;
                var col2=items[i].subject_code;
                var col3=items[i].subject_name;
                var col4="<input type='text' name='txtCreditSub"+indexRef+"' id='txtCreditSub"+indexRef+"' placeholder='หน่วยกิต' style='width:90px;'/>";
                var col5="<button class='btn btn-outline-primary' type='button' onclick='javascript:alert(100);return false;' >แก้ไข</button>";
                
                $('#tbody').append('<tr id="rowSub'+indexRef+'"><td>'+col1+'</td><td>'+col2+'</td><td>'+col3+'</td><td>'+col4+'</td><td>'+col5+'</td></tr>');
            
            }
        
        }
        

        
        
        //----------Control Wizard-form----------------------
        var current_fs, next_fs, previous_fs; //fieldsets
        var opacity;

        $(".next").click(function(){
            
            current_fs = $(this).parent();
            next_fs = $(this).parent().next();
            
            //Add Class Active
            $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
            
            //show the next fieldset
            next_fs.show(); 
            //hide the current fieldset with style
            current_fs.animate({opacity: 0}, {
                step: function(now) {
                    // for making fielset appear animation
                    opacity = 1 - now;

                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    next_fs.css({'opacity': opacity});
                }, 
                duration: 600
            });
        });

        $(".previous").click(function(){
            
            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();
            
            //Remove class active
            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
            
            //show the previous fieldset
            previous_fs.show();

            //hide the current fieldset with style
            current_fs.animate({opacity: 0}, {
                step: function(now) {
                    // for making fielset appear animation
                    opacity = 1 - now;

                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    previous_fs.css({'opacity': opacity});
                }, 
                duration: 600
            });
        });

        $('.radio-group .radio').click(function(){
            $(this).parent().find('.radio').removeClass('selected');
            $(this).addClass('selected');
        });

        $(".submit").click(function(){
            return false;
        });
      
    });
</script>
</html>